{"version":3,"sources":["NegociacaoController.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","NegociacaoController","$","document","querySelector","bind","_inputData","_inputQuantidade","_inputValor","_listaNegociacoes","ListaNegociacoes","_negociacoesView","NegociacoesView","update","_mensagem","Mensagem","_mensagemView","MensagemView","value","adiciona","event","preventDefault","_criaNegociacao","texto","_limpaFormulario","Negociacao","DateHelper","textoParaData","focus","apaga","esvazia","console","log","deletaTabela","importaNegociacoes","_this","service","NegociacaoService","obterNegociacoes","then","negociacoes","forEach","negociacao","catch","erro"],"mappings":"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","file":"NegociacaoController.js","sourcesContent":["\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NegociacaoController = function () {\n    function NegociacaoController() {\n        _classCallCheck(this, NegociacaoController);\n\n        var $ = document.querySelector.bind(document);\n        this._inputData = $(\"#data\");\n        this._inputQuantidade = $(\"#quantidade\");\n        this._inputValor = $(\"#valor\");\n\n        this._listaNegociacoes = new ListaNegociacoes();\n        this._negociacoesView = new NegociacoesView($(\"#negociacoesView\"));\n        this._negociacoesView.update(this._listaNegociacoes);\n\n        this._mensagem = new Mensagem();\n        this._mensagemView = new MensagemView($(\"#mensagemView\"));\n        this._mensagemView.update(this._mensagem);\n    }\n\n    _createClass(NegociacaoController, [{\n        key: \"adiciona\",\n        value: function adiciona(event) {\n\n            event.preventDefault();\n            this._listaNegociacoes.adiciona(this._criaNegociacao());\n            this._negociacoesView.update(this._listaNegociacoes);\n\n            this._mensagem.texto = \"Negociação adicionada com sucesso\";\n            this._mensagemView.update(this._mensagem);\n\n            this._limpaFormulario();\n        }\n    }, {\n        key: \"_criaNegociacao\",\n        value: function _criaNegociacao() {\n            return new Negociacao(DateHelper.textoParaData(this._inputData.value), this._inputQuantidade.value, this._inputValor.value);\n        }\n    }, {\n        key: \"_limpaFormulario\",\n        value: function _limpaFormulario() {\n            this._inputData.value = \"\";\n            this._inputQuantidade.value = 1;\n            this._inputValor.value = 0.0;\n            this._inputData.focus();\n        }\n    }, {\n        key: \"apaga\",\n        value: function apaga() {\n            this._listaNegociacoes.esvazia();\n            this._negociacoesView.update(this._listaNegociacoes);\n\n            console.log(\"vai chamar deletaTabela\");\n            deletaTabela();\n\n            this._mensagem.texto = \"Negociações apagadas com sucesso\";\n            this._mensagemView.update(this._mensagem);\n        }\n    }, {\n        key: \"importaNegociacoes\",\n        value: function importaNegociacoes() {\n            var _this = this;\n\n            var service = new NegociacaoService();\n            service.obterNegociacoes().then(function (negociacoes) {\n                return negociacoes.forEach(function (negociacao) {\n                    _this._listaNegociacoes.adiciona(negociacao);\n                    _this._mensagem.texto = \"Negociações do período importadas\";\n                    _this._negociacoesView.update(_this._listaNegociacoes);\n                    _this._mensagemView.update(_this._mensagem);\n                });\n            }).catch(function (erro) {\n                _this._mensagem.texto = erro;\n                _this._mensagemView.update(_this._mensagem);\n                return;\n            });\n        }\n    }]);\n\n    return NegociacaoController;\n}();"]}